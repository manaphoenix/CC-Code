{% assign codeblock = include.codeblock | default: "true" %}
{% assign lang = include.language | default: "lua" %}

{% if codeblock == "true" %}
<div class="code-block">
{% endif %}
  <div class="code-header">
    {% if lang %}<span class="language">{{ lang }}</span>{% endif %}
    {% if include.title %}<span class="code-title">{{ include.title }}</span>{% endif %}
    <button class="copy-button" onclick="copyCode(this)">Copy</button>
  </div>

  <pre class="line-numbers"><code class="language-{{ lang }}">{{ include.code | escape }}</code></pre>
{% if codeblock == "true" %}
</div>
{% endif %}
